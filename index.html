<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>AutomatizaPRO | Arquitectura de Flujos de Negocio</title>
    <meta name="description" content="Agencia de automatización B2B. Implementamos flujos de trabajo inteligentes para eliminar tareas repetitivas y potenciar el crecimiento estratégico." />
    <meta name="keywords" content="automatización, b2b, zapier, make, eficiencia, productividad, crm, erp, david pastor díaz" />

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>

    <style>
        /* =================================== */
        /* 1. TOKENS DE DISEÑO (VARIABLES CSS) */
        /* =================================== */
        :root{
            --color-bg-primary: #0D0D0D;
            --color-text-base: #F5F5F5;
            --color-ui-surface: #1A1A1A;
            --color-accent-blue: #FF0000;
            --color-accent-green: #ffffff;
            --shadow-neon-blue: 0 0 20px rgba(255, 0, 0, 0.6);
            --shadow-neon-green: 0 0 25px rgba(128, 128, 128, 0.7);
            --font-family-base: 'Inter', sans-serif;
            --spacing-unit: 8px;
        }

        /* RESET */
        *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%}
        body{
            background-color:var(--color-bg-primary);
            color:var(--color-text-base);
            font-family:var(--font-family-base);
            line-height:1.6;
            text-rendering:optimizeLegibility;
            overflow-x:hidden;
        }

        /* Partículas (canvas) en background */
        #particlesCanvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none;}

        .section{position:relative;z-index:1;padding:calc(10 * var(--spacing-unit)) 5%}

        /* Tipos */
        .heading-1{font-size:clamp(2.5rem,7vw,5rem);font-weight:900;text-transform:uppercase}
        .heading-2{font-size:clamp(1.8rem,4vw,3rem);font-weight:700;color:var(--color-text-base);text-align:center;margin-bottom:calc(6 * var(--spacing-unit));text-shadow:var(--shadow-neon-blue)}

        a{color:var(--color-accent-blue);text-decoration:none;transition:color .25s}
        a:hover{color:var(--color-accent-green)}

        /* NAV - sticky */
        .navigation{
            position:fixed;top:0;left:0;width:100%;display:flex;justify-content:space-between;align-items:center;
            padding:calc(2 * var(--spacing-unit)) 5%;background-color:rgba(13,13,13,0.95);backdrop-filter:blur(5px);
            z-index:10000;border-bottom:1px solid rgba(255,0,0,0.15);
        }
        .navigation__logo{font-size:1.8rem;font-weight:900;user-select:none;color:var(--color-text-base);text-shadow:var(--shadow-neon-blue)}
        .navigation__logo-pro{color:var(--color-accent-blue);text-shadow:var(--shadow-neon-blue)}
        .navigation__links{display:flex;align-items:center;gap:12px}
        .navigation__link{margin-left:calc(3 * var(--spacing-unit));padding:calc(1.5 * var(--spacing-unit)) calc(2 * var(--spacing-unit))}
        .navigation__link--cta{border:1px solid var(--color-accent-blue);color:var(--color-text-base);border-radius:10px;text-shadow:var(--shadow-neon-blue)}

        /* HERO */
        .hero{min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;position:relative}
        .hero__content{max-width:1200px;margin:0 auto;z-index:2;padding-top:40px}
        .hero__headline{color:var(--color-text-base);text-shadow:var(--shadow-neon-blue)}
        .hero__tagline{font-size:clamp(1rem,3vw,1.5rem);margin-bottom:calc(6 * var(--spacing-unit));opacity:.8;max-width:800px;margin-left:auto;margin-right:auto;color:var(--color-text-base)}

        .cta-button{
            display:inline-block;padding:calc(2 * var(--spacing-unit)) calc(5 * var(--spacing-unit));
            background-color:var(--color-accent-blue);color:var(--color-bg-primary);font-size:1.25rem;font-weight:bold;
            border:4px solid var(--color-accent-blue);border-radius:8px;transition:all .3s;box-shadow:var(--shadow-neon-blue);
            text-transform:uppercase;cursor:pointer;
        }
        .cta-button:hover{background-color:var(--color-bg-primary);color:var(--color-accent-green);border-color:var(--color-accent-green);box-shadow:var(--shadow-neon-green)}

        /* Services grid */
        .services-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:calc(5 * var(--spacing-unit));max-width:1200px;margin:0 auto}
        .service-card{background-color:var(--color-ui-surface);padding:calc(4 * var(--spacing-unit));border-radius:10px;border:1px solid rgba(128,128,128,.2);transition:all .3s}
        .service-card:hover{box-shadow:0 0 15px rgba(128,128,128,.5);transform:translateY(-5px)}
        .service-card__icon{font-size:2rem;color:var(--color-accent-green);display:block;margin-bottom:calc(2 * var(--spacing-unit))}

        /* Case study */
        .case-study{text-align:center;max-width:800px;margin:0 auto}
        .case-study__title{color:var(--color-accent-blue);font-size:1.8rem;margin-bottom:10px;text-shadow:var(--shadow-neon-blue)}
        .results-grid{display:grid;grid-template-columns:1fr 1fr;gap:calc(5 * var(--spacing-unit));margin-top:calc(5 * var(--spacing-unit))}
        .result-box{padding:calc(3 * var(--spacing-unit));border:2px solid var(--color-accent-blue);border-radius:10px;background-color:rgba(128,128,128,0.05)}
        .result-box__number{font-size:3rem;font-weight:900;display:block;color:var(--color-text-base);text-shadow:var(--shadow-neon-blue)}

        /* Contact */
        .contact-methods{display:flex;justify-content:center;flex-wrap:wrap;gap:calc(8 * var(--spacing-unit));text-align:left}
        .contact-methods__option{flex:1 1 400px;max-width:450px;padding:calc(4 * var(--spacing-unit));background-color:var(--color-ui-surface);border-radius:10px;border:1px solid rgba(255,0,0,.1)}
        .contact-methods__title{color:var(--color-text-base);border-bottom:2px dashed var(--color-accent-blue);padding-bottom:calc(2 * var(--spacing-unit));margin-bottom:calc(3 * var(--spacing-unit));text-align:center}
        .contact-form input,.contact-form textarea{width:100%;padding:calc(1.5 * var(--spacing-unit));margin-bottom:calc(2 * var(--spacing-unit));background-color:#222;border:1px solid var(--color-accent-blue);color:var(--color-text-base);border-radius:4px}
        .contact-form textarea{resize:vertical;min-height:100px}

        /* Footer */
        .footer{position:relative;z-index:1;text-align:center;padding:calc(4 * var(--spacing-unit)) 5%;border-top:1px solid rgba(255,0,0,.1);font-size:.9rem;color:#AAA}

        /* Reveal */
        .reveal{opacity:0;transform:translateY(60px);transition:all .9s ease;filter:brightness(.8)}
        .reveal.visible{opacity:1;transform:translateY(0);filter:brightness(1);animation:neonPulse 3s ease-in-out infinite alternate;box-shadow:0 0 20px rgba(255,0,0,.25),0 0 15px rgba(128,128,128,.15)}
        @keyframes neonPulse{0%{box-shadow:0 0 15px rgba(255,0,0,.2),0 0 10px rgba(128,128,128,.1)}50%{box-shadow:0 0 25px rgba(255,0,0,.5),0 0 25px rgba(128,128,128,.4)}100%{box-shadow:0 0 15px rgba(255,0,0,.2),0 0 10px rgba(128,128,128,.1)}}

        /* Mini-calculadora (hero) */
        .mini-calc{margin:22px auto 0;display:flex;flex-direction:column;gap:10px;align-items:center;justify-content:center;max-width:760px;z-index:2}
        .mini-row{display:flex;gap:10px;width:100%;justify-content:center;align-items:center}
        .mini-row input[type="number"]{width:120px;padding:8px 10px;border-radius:8px;border:1px solid rgba(255,0,0,.12);background:#121212;color:var(--color-text-base);text-align:center;font-weight:700}
        .mini-row input[type="number"]:focus{outline:none;box-shadow:0 6px 18px rgba(255,0,0,.06);border-color:var(--color-accent-green)}
        .mini-results{display:flex;gap:14px;align-items:center;justify-content:center;font-size:.95rem;color:#ddd}
        .mini-results span{background:rgba(255,255,255,.02);padding:8px 12px;border-radius:8px;border:1px solid rgba(255,0,0,.03);font-weight:700;color:var(--color-accent-green)}
        @media (max-width:680px){.mini-row{flex-direction:column;gap:8px}.mini-row input[type="number"]{width:80%}.mini-results{flex-direction:column;gap:8px}}

        /* chatbot button and iframe styles */
        #n8n-chatbot-button{position:fixed;bottom:20px;right:20px;width:60px;height:60px;background-color:var(--color-accent-blue);color:var(--color-bg-primary);border-radius:50%;border:none;box-shadow:0 4px 12px rgba(255,0,0,.6);font-size:28px;line-height:60px;text-align:center;cursor:pointer;z-index:100000;transition:transform .3s ease,background-color .3s,box-shadow .3s;font-family:var(--font-family-base)}
        #n8n-chatbot-iframe{position:fixed;bottom:100px;right:20px;width:350px;height:500px;border:1px solid var(--color-accent-green);border-radius:12px;box-shadow:0 4px 20px rgba(255,255,255,.5);z-index:99999;transition:opacity .3s,transform .3s;transform:translateY(10px) scale(.95);transform-origin:bottom right;opacity:0;display:none;background:white}
        #n8n-chatbot-iframe.is-open{display:block;opacity:1;transform:translateY(0) scale(1)}
        #n8n-chatbot-button.is-open{background-color:var(--color-accent-green);box-shadow:0 4px 12px rgba(255,255,255,.7)}

        /* responsive tweaks */
        @media (max-width:900px){
            .navigation{padding:12px}
            .navigation__links{gap:8px}
        }
    </style>
</head>
<body>
    <!-- Canvas background (particles) -->
    <canvas id="particlesCanvas"></canvas>

    <!-- NAV -->
    <nav class="navigation" role="navigation">
        <div class="navigation__logo">Automatiza<span class="navigation__logo-pro">PRO</span></div>
        <div class="navigation__links">
            <a href="#servicios" class="navigation__link">Servicios</a>
            <a href="#casos" class="navigation__link">Casos de Éxito</a>
            <a href="equipo.html" class="navigation__link">Sobre Nosotros</a>
            <a href="#contacto" class="navigation__link navigation__link--cta">Contacto</a>
        </div>
    </nav>

    <!-- HERO -->
    <header id="home" class="hero section" role="banner">
        <div class="hero__content">
            <h1 class="heading-1 hero__headline">De la Fricción Operativa al Crecimiento Desatendido.</h1>
            <p class="hero__tagline">AutomatizaPRO elimina las tareas repetitivas que queman el tiempo y los recursos. Conectamos tu software para que la eficiencia sea la nueva norma.</p>

            <!-- MINI CALCULADORA (Hero) -->
            <div class="mini-calc" aria-hidden="false">
              <div class="mini-row">
                <input type="number" id="horas-mini" value="5" min="0" aria-label="Horas semanales (mini)" />
                <input type="number" id="valor-mini" value="25" min="0" aria-label="Valor hora (€) (mini)" />
                <button id="calcular-mini" class="cta-button" aria-label="Calcular ahorro mini">Calcular</button>
                <a href="calculadora.html" id="mini-open-full" class="cta-button" style="margin-left:12px;padding:8px 12px;font-size:0.9rem;">Ver detalle</a>
              </div>
              <div class="mini-results" aria-live="polite">
                <span id="mini-mensual">— € / mes</span>
                <span id="mini-anual">— € / año</span>
              </div>
            </div>
            <!-- /MINI CALCULADORA -->

            <div style="margin-top:22px;">
                <button onclick="Calendly.initPopupWidget({url: 'https://calendly.com/info-automatizaprodigital/30min'});return false;" class="cta-button">
                    [ Agenda tu Diagnóstico Gratuito ]
                </button>
            </div>
        </div>
    </header>

    <!-- AUTOMATIZACIONES -->
    <section id="automatizaciones" class="section" aria-labelledby="automatizaciones-titulo">
        <h2 id="automatizaciones-titulo" class="heading-2">Automatizaciones Express: Valor en 48 Horas.</h2>
        <div class="services-grid">
            <div class="service-card reveal">
                <span class="service-card__icon">💬</span>
                <h3>Alerta WhatsApp Lead</h3>
                <p>Recibe un mensaje en WhatsApp cada vez que alguien completa un formulario o te contacta.<br><br><em>"Nunca pierdas un lead por no mirar el correo."</em></p>
            </div>

            <div class="service-card reveal">
                <span class="service-card__icon">🧾</span>
                <h3>Factura Express</h3>
                <p>Genera automáticamente facturas en PDF y envíalas a tus clientes desde una hoja de cálculo.<br><br><em>"Facturación sin esfuerzo, lista en segundos."</em></p>
            </div>

            <div class="service-card reveal">
                <span class="service-card__icon">🗓️</span>
                <h3>Citas Sincronizadas</h3>
                <p>Guarda automáticamente las reservas de Calendly o Google Calendar en una base de datos y envía recordatorios automáticos.<br><br><em>"Tu agenda siempre sincronizada, sin tareas manuales."</em></p>
            </div>
        </div>

        <div style="text-align:center;margin-top:48px;">
            <button onclick="Calendly.initPopupWidget({url: 'https://calendly.com/info-automatizaprodigital/30min'});return false;" class="cta-button">
                [ Agenda tu Automatización Express ]
            </button>
        </div>
    </section>

    <!-- CASOS -->
    <section id="casos" class="section" aria-labelledby="casos-titulo">
        <h2 id="casos-titulo" class="heading-2">Los Números Hablan por Nosotros.</h2>
        <div class="case-study">
            <h3 class="case-study__title">Caso de Éxito: Facturación Instantánea.</h3>
            <p class="case-study__description">Una consultora perdía 15 horas semanales en la transferencia de datos. AutomatizaPRO conectó su pasarela con su contabilidad, logrando:</p>

            <div class="results-grid">
                <div class="result-box">
                    <span class="result-box__number">+60</span>
                    <p>Horas de Talento Recuperadas / Mes</p>
                </div>
                <div class="result-box">
                    <span class="result-box__number">-95%</span>
                    <p>Reducción de Errores de Facturación</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CONTACTO -->
    <section id="contacto" class="section" aria-labelledby="contacto-titulo">
        <h2 id="contacto-titulo" class="heading-2">Inicia el Flujo: Hablemos de tu Próxima Automatización.</h2>
        <div class="contact-methods">
            <div class="contact-methods__option">
                <h3 class="contact-methods__title">Opción 1: El Diagnóstico Automatizado (Recomendado)</h3>
                <p>Reserva 15 minutos en nuestro calendario. Accederás al flujo de David y Lorenzo y verás cómo empieza la eficiencia.</p>
                <button onclick="Calendly.initPopupWidget({url: 'https://calendly.com/info-automatizaprodigital/30min'});return false;" class="cta-button submit-cta" style="margin-top:20px;">
                    [ Agenda tu Llamada con un PRO ]
                </button>
            </div>

            <div class="contact-methods__option">
                <h3 class="contact-methods__title">Opción 2: Envía un Mensaje</h3>
                <form class="contact-form" action="https://formspree.io/f/movknoad" method="POST" aria-label="Formulario de contacto">
                    <input type="text" name="nombre" placeholder="Tu Nombre Completo" required aria-label="Nombre">
                    <input type="email" name="_replyto" placeholder="Email de la Empresa" required aria-label="Email de la Empresa">
                    <textarea name="mensaje" placeholder="¿Cuál es el proceso que más te frustra hoy?" aria-label="Mensaje sobre el proceso"></textarea>
                    <button type="submit" class="cta-button submit-cta">Enviar Solicitud PRO</button>
                </form>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer" role="contentinfo">
        <p>&copy; 2025 AutomatizaPRO. Todos los derechos reservados. Desarrollado con Arquitectura PRO.</p>
        <p>Email: <a href="mailto:info.automatizaprodigital@gmail.com">info.automatizaprodigital@gmail.com</a> | Teléfono: <a href="tel:+34688793329">+34 688 793 329</a> - <a href="tel:+34664499794">+34 664 499 794</a></p>
    </footer>

    <!-- SCRIPTS: particles, reveal, mini-calc sync, particles animation -->
    <script>
    /* ===== Particles system (lightweight) ===== */
    const canvas = document.getElementById('particlesCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function initParticles() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        particles = [];
        const count = Math.max(40, Math.round(window.innerWidth / 30));
        for(let i=0;i<count;i++){
            particles.push({
                x:Math.random() * canvas.width,
                y:Math.random() * canvas.height,
                vx:(Math.random() - 0.5) * 0.6,
                vy:(Math.random() - 0.5) * 0.6,
                r: Math.random() * 2 + 0.8
            });
        }
        animateParticles();
    }
    function animateParticles(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = 'rgba(0,0,0,0)';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        for(let i=0;i<particles.length;i++){
            const p = particles[i];
            p.x += p.vx; p.y += p.vy;
            if(p.x < 0 || p.x > canvas.width) p.vx *= -1;
            if(p.y < 0 || p.y > canvas.height) p.vy *= -1;
            ctx.beginPath();
            ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
            ctx.fillStyle = 'rgba(255,0,0,0.08)';
            ctx.fill();
            // connect
            for(let j=i+1;j<particles.length;j++){
                const p2 = particles[j];
                const dx = p.x - p2.x;
                const dy = p.y - p2.y;
                const dist = Math.sqrt(dx*dx + dy*dy);
                if(dist < 140){
                    ctx.beginPath();
                    ctx.moveTo(p.x,p.y);
                    ctx.lineTo(p2.x,p2.y);
                    ctx.strokeStyle = `rgba(255,0,0,${1 - dist / 140})`;
                    ctx.lineWidth = 0.4;
                    ctx.stroke();
                }
            }
        }
        requestAnimationFrame(animateParticles);
    }
    window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; initParticles(); });
    initParticles();

    /* ===== Reveal on scroll (simple) ===== */
    document.addEventListener("scroll", function(){
        const reveals = document.querySelectorAll(".reveal");
        for(const el of reveals){
            const rect = el.getBoundingClientRect();
            if(rect.top < window.innerHeight - 100) el.classList.add("visible");
        }
    });

    /* ===== Mini-calculadora logic & sync with full calculator (if present) ===== */
    (function(){
        const horasMini = document.getElementById('horas-mini');
        const valorMini = document.getElementById('valor-mini');
        const btnMini = document.getElementById('calcular-mini');
        const miniMensual = document.getElementById('mini-mensual');
        const miniAnual = document.getElementById('mini-anual');
        const openFull = document.getElementById('mini-open-full');

        const format = (n) => {
            try { return Number(n).toLocaleString('es-ES', { maximumFractionDigits: 0 }); }
            catch(e){ return n; }
        };

        function computeAndShow(){
            const horas = Math.max(0, parseFloat(horasMini.value) || 0);
            const valor = Math.max(0, parseFloat(valorMini.value) || 0);
            const mensual = Math.round(horas * valor * 4);
            const anual = Math.round(mensual * 12);
            miniMensual.textContent = `${format(mensual)} € / mes`;
            miniAnual.textContent = `${format(anual)} € / año`;

            // Sync with full calculator if exists on the page (not on index but safe)
            try {
                const horasFull = document.getElementById('horas');
                const valorFull = document.getElementById('valor');
                const calcularFullBtn = document.getElementById('calcular');
                if(horasFull && valorFull && calcularFullBtn){
                    horasFull.value = horas;
                    valorFull.value = valor;
                    setTimeout(()=>calcularFullBtn.click(),120);
                }
            } catch(e){
                console.warn('Mini-calc sync failed', e);
            }
        }

        btnMini.addEventListener('click', (e)=>{ e.preventDefault(); computeAndShow(); });
        [horasMini, valorMini].forEach(inp=>inp.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter'){ev.preventDefault(); computeAndShow();}}));
        document.addEventListener('DOMContentLoaded', computeAndShow);
        openFull.addEventListener('click', ()=>{ setTimeout(()=>{ const hf=document.getElementById('horas'); if(hf) hf.focus(); },600); });
    })();

    </script>

    <!-- Chatbot n8n: button + iframe + script -->
    <button id="n8n-chatbot-button" aria-label="Abrir chat">💬</button>
    <iframe id="n8n-chatbot-iframe" src="https://n8n.automatizaprodigital.pro/chatbot" title="Chat n8n"></iframe>
    <script>
        (function(){
            const btn = document.getElementById('n8n-chatbot-button');
            const iframe = document.getElementById('n8n-chatbot-iframe');
            btn.addEventListener('click', ()=>{
                const open = iframe.classList.toggle('is-open');
                btn.classList.toggle('is-open', open);
            });
        })();
    </script>

    <!-- HubSpot embed (kept as in your original) -->
    <script type="text/javascript" id="hs-script-loader" async defer src="//js-eu1.hs-scripts.com/147073534.js"></script>
</body>
</html>
